<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ZION | TEST PROTOCOL</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@500;600;700;800&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { 
                        sans: ['Manrope', 'sans-serif'], 
                        mono: ['JetBrains Mono', 'monospace'] 
                    },
                    colors: {
                        zionBlack: "#000000",
                        zionCard: "#0f0f0f",
                        zionBorder: "#333333",
                        zionText: "#ffffff",
                        zionDim: "#9ca3af"
                    },
                    animation: { 'fade-in': 'fadeIn 0.6s ease-out' },
                    keyframes: { fadeIn: { '0%': { opacity: '0', transform: 'translateY(15px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } } }
                }
            }
        }
    </script>
    <style>
        body { background-color: #000000; color: #ffffff; -webkit-font-smoothing: antialiased; overflow: hidden; } /* Overflow hidden —á—Ç–æ–±—ã –Ω–µ —Å–∫—Ä–æ–ª–ª–∏–ª–æ—Å—å –ø–æ–∫–∞ —Ç—É–º–∞–Ω */
        * { -webkit-tap-highlight-color: transparent; cursor: default; }
        
        /* FLASHLIGHT EFFECT */
        #flashlight {
            position: fixed; inset: 0; pointer-events: none; z-index: 0;
            background: radial-gradient(600px circle at var(--x, 50%) var(--y, 50%), rgba(255, 255, 255, 0.06), transparent 40%);
        }

        /* FOG LAYER (CANVAS) */
        #fog-container {
            position: fixed;
            inset: 0;
            z-index: 100; /* –ü–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ */
            transition: opacity 2s ease-in-out; /* –ü–ª–∞–≤–Ω–æ–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ */
            cursor: crosshair; /* –ö—É—Ä—Å–æ—Ä-–ø—Ä–∏—Ü–µ–ª */
        }
        canvas {
            display: block;
            width: 100%;
            height: 100%;
            /* üî• –ì–õ–ê–í–ù–ê–Ø –ú–ê–ì–ò–Ø: –ë–õ–Æ–† –ü–†–Ø–ú–û –ù–ê –ö–ê–ù–í–ê–°–ï */
            backdrop-filter: blur(15px) grayscale(100%); 
            -webkit-backdrop-filter: blur(15px) grayscale(100%);
        }
        /* –¢–µ–∫—Å—Ç –ø–æ–≤–µ—Ä—Ö —Ç—É–º–∞–Ω–∞ */
        .fog-text {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            text-align: center;
            color: rgba(255,255,255,0.5);
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            letter-spacing: 0.2em;
            animation: pulse 2s infinite;
        }
        @keyframes pulse { 0%, 100% { opacity: 0.3; } 50% { opacity: 0.8; } }

        /* Cards styles */
        .flat-card {
            background-color: #0f0f0f;
            border: 1px solid #333;
            transition: all 0.2s ease;
            position: relative; z-index: 10;
        }
        .flat-card:active { background-color: #222; }
        @media (min-width: 768px) { 
            .flat-card:hover { 
                border-color: #ffffff; background-color: #161616;
                box-shadow: 0 0 30px rgba(255, 255, 255, 0.1); transform: scale(1.01);
            } 
        }
        
        .ios-steps { max-height: 0; overflow: hidden; transition: max-height 0.35s cubic-bezier(0.4, 0, 0.2, 1); }
        .ios-expanded { max-height: 200px; }
        .lang-btn { opacity: 0.5; transition: all 0.3s; cursor: pointer; font-family: 'JetBrains Mono', monospace; font-weight: 700; z-index: 20; position: relative; }
        .lang-btn:hover, .lang-btn.active { opacity: 1; color: white; text-decoration: underline; text-underline-offset: 4px; }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-6 md:p-12 relative">

    <!-- üå´Ô∏è FOG LAYER (–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –¢—É–º–∞–Ω) -->
    <div id="fog-container">
        <canvas id="fogCanvas"></canvas>
        <div class="fog-text">
            INITIALIZING SECURE CONNECTION...<br>
            <span class="text-[10px] opacity-50 mt-2 block">WIPE SCREEN TO DECRYPT</span>
        </div>
    </div>

    <!-- Flashlight -->
    <div id="flashlight"></div>
    <div class="fixed inset-0 opacity-[0.05] pointer-events-none z-0" style="background-image: url('https://grainy-gradients.vercel.app/noise.svg');"></div>

    <!-- Lang -->
    <div class="absolute top-8 right-8 z-50 flex items-center gap-4 text-base font-bold text-gray-400">
        <span onclick="setLang('ru')" class="lang-btn" id="btn-ru">RU</span>
        <span class="opacity-30">/</span>
        <span onclick="setLang('en')" class="lang-btn active" id="btn-en">EN</span>
    </div>

    <!-- MAIN CONTENT (Same as before) -->
    <div class="w-full max-w-[400px] md:max-w-7xl relative z-10 animate-fade-in flex flex-col md:flex-row md:items-start md:justify-center md:gap-32">
        
        <div class="text-center md:text-left md:w-[400px] md:h-[600px] md:flex md:flex-col md:justify-between mb-12 md:mb-0 md:sticky md:top-24">
            <div>
                <img src="assets/images/logo.png" alt="ZION" class="h-20 md:h-32 mx-auto md:mx-0 mb-8 md:mb-10 object-contain opacity-100">
                <div class="inline-block px-4 py-2 border border-gray-600 rounded-sm bg-zinc-900">
                    <span id="buildText" class="text-xs md:text-sm text-white font-mono font-bold tracking-widest uppercase" data-value="BUILD: PUBLIC_BETA_v1.0">BUILD: PUBLIC_BETA_v1.0</span>
                </div>
                <p class="hidden md:block mt-10 text-gray-300 text-lg font-medium leading-relaxed max-w-[350px]" data-i18n="main_desc">
                    Secure, encrypted communication protocol. <br>
                    Select your platform to begin installation.
                </p>
            </div>
            <div class="hidden md:block">
                <a href="#" class="text-sm text-gray-400 hover:text-white transition-colors border-b-2 border-gray-600 hover:border-white pb-1 font-semibold" data-i18n="mirror_link">Download issues? Mirror Link</a>
                <div class="mt-6 text-xs font-bold tracking-[0.2em] text-gray-500 uppercase" data-i18n="secured_by">SECURED BY ZION PROTOCOL</div>
            </div>
        </div>

        <div class="w-full md:w-[550px] flex flex-col md:flex-col-reverse gap-4 md:gap-5">
            <!-- MOBILE APPS -->
            <div class="space-y-4 md:space-y-5">
                <div class="flat-card rounded-sm overflow-hidden">
                    <div onclick="toggleIOS()" class="p-5 md:p-7 flex items-center justify-between cursor-pointer">
                        <div class="flex items-center gap-5 md:gap-6">
                            <div class="w-14 h-14 md:w-16 md:h-16 rounded-sm bg-white flex items-center justify-center border border-gray-500">
                                <i class="fab fa-apple text-3xl md:text-4xl text-black"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-xl md:text-2xl text-white leading-none" data-i18n="ios_title">iOS App</h3>
                                <p class="text-sm md:text-base text-gray-400 mt-1 font-mono font-medium" data-i18n="ios_sub">via TestFlight</p>
                            </div>
                        </div>
                        <i id="iosChevron" class="fas fa-chevron-down text-gray-400 transition-transform duration-300 text-lg"></i>
                    </div>
                    <div id="iosSteps" class="ios-steps bg-zinc-900 border-t border-gray-700">
                        <div class="p-4 md:p-6 space-y-3">
                            <a href="https://apps.apple.com/us/app/testflight/id899247664" target="_blank" class="flex items-center gap-4 p-4 rounded-sm border border-gray-600 hover:bg-white hover:text-black transition-colors group">
                                <div class="w-6 h-6 rounded-sm bg-[#007AFF] flex items-center justify-center text-xs font-bold text-white">1</div>
                                <div class="text-sm font-bold group-hover:text-black text-gray-200" data-i18n="ios_step1">Install TestFlight</div>
                            </a>
                            <a href="https://testflight.apple.com/join/UcnAFCbV" target="_blank" class="flex items-center gap-4 p-4 rounded-sm border border-gray-600 hover:bg-white hover:text-black transition-colors group">
                                <div class="w-6 h-6 rounded-sm bg-white flex items-center justify-center text-xs font-bold text-black border border-black">2</div>
                                <div class="text-sm font-bold group-hover:text-black text-gray-200" data-i18n="ios_step2">Join ZION Beta</div>
                            </a>
                        </div>
                    </div>
                </div>
                <a id="androidLink" href="#" class="block flat-card rounded-sm p-5 md:p-7 group">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-5 md:gap-6">
                            <div class="w-14 h-14 md:w-16 md:h-16 rounded-sm bg-white flex items-center justify-center border border-gray-500">
                                <i class="fab fa-android text-3xl md:text-4xl text-[#3DDC84] drop-shadow-sm"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-xl md:text-2xl text-white leading-none">Android</h3>
                                <div class="flex items-center gap-3 mt-1">
                                    <p class="text-sm md:text-base text-gray-400 font-mono font-medium" data-i18n="android_sub">Direct .APK</p>
                                    <span id="androidVer" class="text-[10px] bg-white text-black font-bold px-2 py-0.5 rounded-sm hidden">v1.0</span>
                                </div>
                            </div>
                        </div>
                        <i class="fas fa-arrow-down text-gray-500 group-hover:text-white transition-colors text-xl"></i>
                    </div>
                </a>
            </div>
            <div class="py-6 md:py-8 flex items-center gap-6 opacity-60">
                <div class="h-0.5 bg-gray-700 flex-1"></div>
                <span class="md:hidden text-[10px] font-mono font-bold tracking-[0.25em] text-gray-400 uppercase" data-i18n="desktop_divider">DESKTOP</span>
                <span class="hidden md:block text-[10px] font-mono font-bold tracking-[0.25em] text-gray-400 uppercase">MOBILE</span>
                <div class="h-0.5 bg-gray-700 flex-1"></div>
            </div>
            <!-- DESKTOP APPS -->
            <div class="space-y-4 md:space-y-5">
                <a href="#" class="block flat-card rounded-sm p-5 md:p-7 group">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-5 md:gap-6">
                            <div class="w-14 h-14 md:w-16 md:h-16 rounded-sm bg-white flex items-center justify-center border border-gray-500">
                                <i class="fab fa-apple text-3xl md:text-4xl text-black"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-xl md:text-2xl text-white leading-none">macOS</h3>
                                <div class="flex items-center gap-2 mt-1">
                                    <p class="text-sm md:text-base text-gray-400 font-mono font-medium" data-i18n="mac_sub">Apple Silicon</p>
                                    <span class="text-[10px] text-black bg-yellow-500 font-bold px-1.5 rounded-sm">M1/M2/M3</span>
                                </div>
                            </div>
                        </div>
                        <i class="fas fa-arrow-down text-gray-500 group-hover:text-white transition-colors text-xl"></i>
                    </div>
                </a>
                <a href="#" class="block flat-card rounded-sm p-5 md:p-7 group">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-5 md:gap-6">
                            <div class="w-14 h-14 md:w-16 md:h-16 rounded-sm bg-white flex items-center justify-center border border-gray-500">
                                <i class="fab fa-windows text-3xl md:text-4xl text-[#00A4EF]"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-xl md:text-2xl text-white leading-none">Windows</h3>
                                <p class="text-sm md:text-base text-gray-400 mt-1 font-mono font-medium" data-i18n="win_sub">Windows 10/11 (x64)</p>
                            </div>
                        </div>
                        <i class="fas fa-arrow-down text-gray-500 group-hover:text-white transition-colors text-xl"></i>
                    </div>
                </a>
            </div>
        </div>
        <div class="mt-12 text-center md:hidden">
            <a href="#" class="text-sm text-gray-300 hover:text-white transition-colors border-b-2 border-gray-600 hover:border-white pb-1 font-semibold" data-i18n="mirror_link">Download issues? Mirror Link</a>
            <div class="mt-8 text-[10px] font-bold tracking-widest text-gray-600 uppercase" data-i18n="secured_by">SECURED BY ZION PROTOCOL</div>
        </div>
    </div>

    <script>
        // --- üå´Ô∏è FOG LOGIC ---
        const canvas = document.getElementById('fogCanvas');
        const ctx = canvas.getContext('2d');
        const fogContainer = document.getElementById('fog-container');
        let width, height;

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            // –ó–∞–ª–∏–≤–∞–µ–º —á–µ—Ä–Ω—ã–º —Ü–≤–µ—Ç–æ–º (—Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é 85%)
            // –ë–ª—é—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ CSS backdrop-filter, –∞ –∫–∞–Ω–≤–∞—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ "–º–∞—Å–∫–∞"
            ctx.fillStyle = 'rgba(5, 5, 5, 0.85)'; 
            ctx.fillRect(0, 0, width, height);
            // –†–µ–∂–∏–º "–õ–∞—Å—Ç–∏–∫"
            ctx.globalCompositeOperation = 'destination-out';
        }

        function draw(x, y) {
            // –†–∏—Å—É–µ–º "–¥—ã—Ä–∫–∏" –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏
            ctx.beginPath();
            ctx.arc(x, y, 80, 0, Math.PI * 2); // –†–∞–∑–º–µ—Ä –∫–∏—Å—Ç–∏ 80px
            ctx.fill();
        }

        // –†–∞—Å—Ç–≤–æ—Ä–µ–Ω–∏–µ —Ç—É–º–∞–Ω–∞
        function dissolveFog() {
            fogContainer.style.opacity = '0';
            document.body.style.overflow = 'auto'; // –í–∫–ª—é—á–∞–µ–º —Å–∫—Ä–æ–ª–ª
            setTimeout(() => {
                fogContainer.style.display = 'none';
            }, 2000); // –ñ–¥–µ–º –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
        }

        // –°–æ–±—ã—Ç–∏—è –º—ã—à–∏/—Ç–∞—á–∞
        window.addEventListener('resize', resize);
        resize();

        let isDrawing = false;
        
        // Mouse
        document.addEventListener('mousemove', (e) => {
            draw(e.clientX, e.clientY);
            moveFlashlight(e); // Also move flashlight
        });
        
        // Touch (Mobile)
        document.addEventListener('touchmove', (e) => {
            e.preventDefault(); // –ë–ª–æ–∫–∏—Ä—É–µ–º —Å–∫—Ä–æ–ª–ª
            draw(e.touches[0].clientX, e.touches[0].clientY);
        }, { passive: false });

        // –¢–∞–π–º–µ—Ä 10 —Å–µ–∫
        setTimeout(dissolveFog, 10000);


        // --- FLASHLIGHT ---
        const flashlight = document.getElementById('flashlight');
        function moveFlashlight(e) {
            flashlight.style.setProperty('--x', e.clientX + 'px');
            flashlight.style.setProperty('--y', e.clientY + 'px');
        }

        // --- OTHER SCRIPTS ---
        const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
        document.addEventListener("DOMContentLoaded", () => {
            const target = document.getElementById('buildText');
            let iteration = 0; const originalText = target.dataset.value; let interval = setInterval(() => {
                target.innerText = originalText.split("").map((letter, index) => {
                    if(index < iteration) return originalText[index];
                    return letters[Math.floor(Math.random() * 26)];
                }).join("");
                if(iteration >= originalText.length) clearInterval(interval);
                iteration += 1 / 3;
            }, 30);
        });

        const translations = {
            en: { ios_title: "iOS App", ios_sub: "via TestFlight", ios_step1: "Install TestFlight", ios_step2: "Join ZION Beta", android_sub: "Direct .APK", desktop_divider: "DESKTOP", mac_sub: "Apple Silicon", win_sub: "Windows 10/11 (x64)", mirror_link: "Download issues? Mirror Link", main_desc: "Secure, encrypted communication protocol. <br>Select your platform to begin installation.", secured_by: "SECURED BY ZION PROTOCOL" },
            ru: { ios_title: "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ iOS", ios_sub: "—á–µ—Ä–µ–∑ TestFlight", ios_step1: "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å TestFlight", ios_step2: "–í—Å—Ç—É–ø–∏—Ç—å –≤ ZION Beta", android_sub: "–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ .APK", desktop_divider: "–î–ï–°–ö–¢–û–ü", mac_sub: "Apple Silicon", win_sub: "Windows 10/11 (x64)", mirror_link: "–ù–µ –∫–∞—á–∞–µ—Ç? –ó–µ—Ä–∫–∞–ª–æ (Drive)", main_desc: "–ó–∞—â–∏—â–µ–Ω–Ω—ã–π, –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª. <br>–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏.", secured_by: "–ó–ê–©–ò–©–ï–ù–û –ü–†–û–¢–û–ö–û–õ–û–ú ZION" }
        };
        function setLang(lang) {
            document.getElementById('btn-en').classList.toggle('active', lang === 'en'); document.getElementById('btn-ru').classList.toggle('active', lang === 'ru');
            document.querySelectorAll('[data-i18n]').forEach(el => { const key = el.getAttribute('data-i18n'); if(translations[lang][key]) el.innerHTML = translations[lang][key]; });
        }

        function toggleIOS() {
            const steps = document.getElementById('iosSteps'); const chevron = document.getElementById('iosChevron');
            if (steps.classList.contains('ios-expanded')) { steps.classList.remove('ios-expanded'); chevron.style.transform = 'rotate(0deg)'; } else { steps.classList.add('ios-expanded'); chevron.style.transform = 'rotate(180deg)'; }
        }

        const GITHUB_REPO = "odBoreas/zion"; 
        async function getLatestApk() {
            try {
                const response = await fetch(`https://api.github.com/repos/${GITHUB_REPO}/releases/latest`);
                if (!response.ok) return;
                const data = await response.json();
                const apkAsset = data.assets.find(asset => asset.name.endsWith('.apk'));
                if (apkAsset) {
                    const btn = document.getElementById('androidLink');
                    btn.href = apkAsset.browser_download_url;
                    const verBadge = document.getElementById('androidVer');
                    verBadge.innerText = data.tag_name;
                    verBadge.classList.remove('hidden');
                }
            } catch (error) { console.log("Manual link used"); }
        }
        getLatestApk();
    </script>
</body>
</html>
